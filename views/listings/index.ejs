<% layout("layouts/boilerplate") %>

<body class="d-flex flex-column min-vh-100">

  <!-- Icon Scroll Filter -->
  <div class="scroll-wrapper d-flex overflow-auto px-4 gap-4 position-relative" id="filterScroll">
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-mountain fa-lg mb-1"></i><br><small>Views</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-city fa-lg mb-1"></i><br><small>Iconic cities</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-water fa-lg mb-1"></i><br><small>Surfing</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-swimming-pool fa-lg mb-1"></i><br><small>Pools</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-umbrella-beach fa-lg mb-1"></i><br><small>Beach</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-home fa-lg mb-1"></i><br><small>Cabins</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-fire fa-lg mb-1"></i><br><small>Trending</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-filter fa-lg mb-1"></i><br><small>Filters</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-ice-cream fa-lg mb-1"></i><br><small>Unique</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-tree fa-lg mb-1"></i><br><small>Forest</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-snowflake fa-lg mb-1"></i><br><small>Winter</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-moon fa-lg mb-1"></i><br><small>Nightlife</small>
    </div>
    <div class="text-center flex-shrink-0 icon-item">
      <i class="fas fa-paw fa-lg mb-1"></i><br><small>Pet-friendly</small>
    </div>

    <!-- Custom Toggle Switch -->
    <label class="custom-toggle-container ms-4 flex-shrink-0">
      <span class="custom-label">Display total before taxes</span>
      <input type="checkbox" id="toggleTax">
      <span class="custom-toggle-switch"></span>
    </label>
  </div>

  <!-- Listings Grid -->
  <div class="container mt-4">
    <div class="row row-cols-lg-3 row-cols-md-3 row-cols-1 g-4">
      <% for (let listing of listings) { %>
        <div class="col">
          <a href="/listings/<%= listing._id %>" class="text-decoration-none text-dark">
            <div class="card h-100 shadow-sm listing-card">
              <img src="<%= listing.image.url %>" class="card-img-top" alt="listing_image" style="height: 20rem; object-fit: cover;">
              <div class="card-body">
                <p class="card-text mb-1">
                  <strong><%= listing.title %></strong><br>
                  &#8377;<%= listing.price?.toLocaleString("en-IN") %>/night
                  <span class="tax-info"> &nbsp;&nbsp;+18% GST</span>
                </p>
              </div>
            </div>
          </a>
        </div>
      <% } %>
    </div>
  </div>

  <!-- Font Awesome -->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>

  <!-- Custom Styles -->
  <style>
    .scroll-wrapper::-webkit-scrollbar {
      display: none;
    }

    .scroll-wrapper {
      scroll-behavior: smooth;
      white-space: nowrap;
      padding: 1rem 0;
    }

    .icon-item {
      transition: transform 0.2s ease, color 0.2s ease;
      cursor: pointer;
    }

    .icon-item:hover {
      transform: scale(1.1);
      color: #000;
    }

    .tax-info {
      display: none;
      color: gray;
      font-size: 0.9rem;
    }

    /* Custom Toggle Switch Styles */
    .custom-toggle-container {
      display: inline-flex;
      align-items: center;
      padding: 8px 16px;
      background-color: #f5f5f5;
      border-radius: 25px;
      border: 1px solid #ddd;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.3s;
    }

    .custom-toggle-container:hover {
      background-color: #e9e9e9;
    }

    .custom-toggle-container input[type="checkbox"] {
      display: none;
    }

    .custom-toggle-switch {
      position: relative;
      width: 40px;
      height: 20px;
      background-color: #ccc;
      border-radius: 20px;
      margin-left: 12px;
      transition: background-color 0.3s;
    }

    .custom-toggle-switch::before {
      content: "";
      position: absolute;
      top: 2px;
      left: 2px;
      width: 16px;
      height: 16px;
      background-color: white;
      border-radius: 50%;
      transition: transform 0.3s;
    }

    input[type="checkbox"]:checked + .custom-toggle-switch {
      background-color: #4caf50;
    }

    input[type="checkbox"]:checked + .custom-toggle-switch::before {
      transform: translateX(20px);
    }

    .custom-label {
      font-size: 14px;
      color: #333;
    }
  </style>

  <!-- Tax Toggle Script -->
  <script>
    const taxSwitch = document.getElementById('toggleTax');
    const taxInfoElements = document.querySelectorAll('.tax-info');

    taxSwitch.addEventListener('change', () => {
      taxInfoElements.forEach(el => {
        el.style.display = taxSwitch.checked ? 'inline' : 'none';
      });
    });
  </script>

</body>
